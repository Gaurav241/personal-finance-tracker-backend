# Personal Finance Tracker Backend Environment Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Environment (development, production, test)
NODE_ENV=development

# Server port
PORT=5000

# Server host (use 0.0.0.0 for production to accept external connections)
HOST=localhost

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection URL (preferred method)
DATABASE_URL=postgresql://finance_user:your_secure_password@localhost:5432/finance_tracker

# Alternative: Individual database connection parameters
DB_HOST=localhost
DB_PORT=5432
DB_NAME=finance_tracker
DB_USER=finance_user
DB_PASSWORD=your_secure_password

# Database pool configuration
DB_POOL_MIN=2
DB_POOL_MAX=10

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis connection URL (preferred method)
REDIS_URL=redis://localhost:6379

# Alternative: Individual Redis connection parameters
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis connection pool
REDIS_POOL_MIN=2
REDIS_POOL_MAX=10

# =============================================================================
# JWT AUTHENTICATION CONFIGURATION
# =============================================================================

# JWT secret for access tokens (minimum 32 characters)
JWT_SECRET=your-super-secret-jwt-key-at-least-32-characters-long

# JWT secret for refresh tokens (minimum 32 characters)
JWT_REFRESH_SECRET=your-super-secret-refresh-key-at-least-32-characters-long

# Token expiration times
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# JWT issuer and audience (optional)
JWT_ISSUER=personal-finance-tracker
JWT_AUDIENCE=finance-app-users

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# Frontend URL for CORS configuration
FRONTEND_URL=http://localhost:3000

# API base URL (used in documentation and responses)
API_BASE_URL=http://localhost:5000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# bcrypt rounds for password hashing (10-12 recommended)
BCRYPT_ROUNDS=12

# CSRF secret key (minimum 32 characters)
CSRF_SECRET=your-csrf-secret-key-at-least-32-characters-long

# Session secret (if using sessions)
SESSION_SECRET=your-session-secret-key-at-least-32-characters-long

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Authentication endpoints rate limiting
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# General API rate limiting
GENERAL_RATE_LIMIT_WINDOW_MS=3600000
GENERAL_RATE_LIMIT_MAX_REQUESTS=1000

# Transaction endpoints rate limiting
TRANSACTION_RATE_LIMIT_WINDOW_MS=3600000
TRANSACTION_RATE_LIMIT_MAX_REQUESTS=100

# Analytics endpoints rate limiting
ANALYTICS_RATE_LIMIT_WINDOW_MS=3600000
ANALYTICS_RATE_LIMIT_MAX_REQUESTS=50

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Cache TTL in seconds
CACHE_TTL_ANALYTICS=900
CACHE_TTL_CATEGORIES=3600
CACHE_TTL_USER_SESSIONS=86400

# Cache key prefixes
CACHE_PREFIX_ANALYTICS=analytics
CACHE_PREFIX_CATEGORIES=categories
CACHE_PREFIX_SESSIONS=sessions

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Log file path (leave empty to disable file logging)
LOG_FILE=

# Enable console logging
LOG_CONSOLE=true

# Log format (json, simple)
LOG_FORMAT=simple

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================

# SMTP configuration for sending emails
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=

# Email addresses
EMAIL_FROM=noreply@personalfinancetracker.com
EMAIL_ADMIN=admin@personalfinancetracker.com

# =============================================================================
# FILE UPLOAD CONFIGURATION (Optional)
# =============================================================================

# Maximum file size for uploads (in bytes)
MAX_FILE_SIZE=5242880

# Allowed file types
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# Upload directory
UPLOAD_DIR=uploads

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================

# AWS Configuration (if using AWS services)
AWS_REGION=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=

# Google OAuth (if implementing Google login)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# =============================================================================
# MONITORING AND ANALYTICS (Optional)
# =============================================================================

# Application monitoring
SENTRY_DSN=

# Google Analytics
GA_TRACKING_ID=

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Enable debug mode
DEBUG=false

# Enable API documentation in production
ENABLE_API_DOCS=true

# Enable detailed error responses
DETAILED_ERRORS=false

# Mock external services for testing
MOCK_EXTERNAL_SERVICES=false

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Request timeout in milliseconds
REQUEST_TIMEOUT=30000

# Body parser limits
BODY_LIMIT=10mb
PARAMETER_LIMIT=1000

# Compression settings
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable specific features
ENABLE_USER_REGISTRATION=true
ENABLE_PASSWORD_RESET=true
ENABLE_EMAIL_VERIFICATION=false
ENABLE_TWO_FACTOR_AUTH=false
ENABLE_EXPORT_FEATURES=true
ENABLE_IMPORT_FEATURES=true

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/opt/finance-tracker/backups

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test database configuration
TEST_DATABASE_URL=postgresql://finance_user:your_secure_password@localhost:5432/finance_tracker_test
TEST_REDIS_URL=redis://localhost:6379/1

# Test environment settings
TEST_JWT_SECRET=test-jwt-secret-for-testing-only
TEST_BCRYPT_ROUNDS=4